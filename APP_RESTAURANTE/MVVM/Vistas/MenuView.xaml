<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="APP_RESTAURANTE.MVVM.Vistas.MenuView"
             Title="MenuView">
    <StackLayout Padding="10" Orientation="Vertical">

        <Label Text="Bienvenido al sistema" FontAttributes="Bold" HorizontalTextAlignment="Center" FontSize="20" />
        <Label Text="{Binding Activeusuario}" FontAttributes="Bold" HorizontalTextAlignment="Center" FontSize="14" Margin="0" TextTransform="Uppercase"/>


        <CollectionView x:Name="cvMenu" Margin="0,10" 
                    ItemsSource="{Binding listamenu}"
                    SelectionMode="None" ItemsLayout="VerticalList">

            <CollectionView.ItemTemplate>
                <DataTemplate>

                    <!-- Root del item: le damos nombre para targetearlo con VisualState -->
                    <Grid x:Name="root"
                      Padding="1"
                      ColumnDefinitions="Auto,*"
                      RowDefinitions="*"
                      BackgroundColor="Transparent">
                        <Grid.GestureRecognizers>
                            <TapGestureRecognizer  Tapped="TapGestureRecognizer_Tapped" />
                        </Grid.GestureRecognizers>
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates">

                                <VisualState x:Name="Normal">
                                    <VisualState.Setters>
                                        <Setter Property="BackgroundColor" Value="White" />
                                    </VisualState.Setters>
                                </VisualState>

                                <VisualState x:Name="Selected">
                                    <VisualState.Setters>
                                        <Setter Property="BackgroundColor" Value="#E0E0E0" />
                                    </VisualState.Setters>
                                </VisualState>

                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>

                        <Image Source="{Binding nombreicono}"
                           WidthRequest="50"
                           HeightRequest="50"
                           Aspect="AspectFill"
                           VerticalOptions="Center" />

                        <Label x:Name="nombreitem"
                           Grid.Row="0"
                           Grid.Column="1"
                           Text="{Binding nombreitem}"
                           VerticalOptions="Center"
                           FontSize="16"
                           Margin="10,0,0,0" />

                        <!-- Visual states para cambiar fondo y texto al seleccionar -->
                      

                    </Grid>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>



        <Label Text="Version 1.1.36" VerticalOptions="EndAndExpand" HorizontalTextAlignment="Center" />
    </StackLayout>
</ContentPage>